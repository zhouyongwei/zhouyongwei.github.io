---
layout: post
title: '容器技术概述'
subtitle: '容器基础知识入门'
date: 2020-02-06
categories: 容器 docker 基础 入门 
tags: 异常
---

### 意义

* 虚拟机的轻量替代
  环境部署
  虚拟机是操作系统级别的虚拟化，docker是应用程序级别的虚拟化
  降低虚拟机需求的数量，因为高可用的要求，老渠道、核心不是高可用，新分布式为了实现高可用、保证部分机器异常的情况下，还是能够提供服务，zk、etc，raft算法
  服务发现、服务注册
  提高安全性
  
* 环境部署
  保证了线上线下环境的一致性，
  环境移植更简单
* 增强系统可用性
  可以提供更多的分布式环境，提供太多的虚拟机不现实，每台虚拟机至少4C8G，容器需要的资源跟进程差不多，但有更好的隔离性，可以限制每个容器使用的cpu和内存容量
* 隔离性
  类似虚拟机一样的单独机器
* 对于测试的意义
  环境的整体迁移，包括执行码、相关配置
* 简化软件安装
  oracle、gitlab、jenkins、redis、zookeeeper
* 简化应用自启动
* 容器跟主机、网络的关系是很密切的
* 每个容器有独立的文件，比如etc/hosts ，用户，/etc/passwd,   网络等
* 与内核版本关联很大

### 基本概念

基于 Linux 内核的 cgroup，namespace，以及AUFS 类的 Union FS 等技术，对进程进行封装隔离，属于 操作系统层面的虚拟化技术。
由于隔离的进程独立于宿主和其它的隔离的进程，因此也称其为容器。
最初实现是基于 LXC，从 0.7 以后开始去除 LXC，转而使用自行开发的 libcontainer，从 1.11 开始，则进一步演进为使用 runC 和 containerd。
Docker 在容器的基础上，进行了进一步的封装，从文件系统、网络互联到进程隔离等等，极大的简化了容器的创建和维护。
使得 Docker 技术比虚拟机技术更为轻便、快捷。 
* 镜像
* 容器
更高效的利用系统资源
更快速的启动时间
一致的运行环境
持续交付和部署
更轻松的迁移
更轻松的维护和扩展

### 常用命令
* yaml文件说明
测试环境和生产环境的端口应该一致 1518


### 容器管理

* docker-compose
* swarm
* kubernetes



##### 网络问题

* 容器的网络
* 

### 实践

* 渠道服务平台
  * 基础服务：zookeeper*3、redis-sentinel*3、zkui、dubbo-monitor、dubbo-admin
  * 业务服务：cip-pub-service、

gitlab
jenkins